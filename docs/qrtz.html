<style>body {
  font-family: Open Sans;
  width: 80%;
  line-height: 24px;
  font-size: 14px;
  margin: 50px auto;
  word-break: break-word;
  min-width: 400px;
  padding-bottom:200px;
}

body > dl > dt, body > dt {
  border-top: 1px solid #eee;
  padding-top: 20px;
  margin-top: 40px;
}

a {
  color: #7174D8;
  text-decoration: none;
  border-bottom: 1px solid rgba(113,116,216,.3);
}

input {
  margin: 2px;
}

li {
  list-style-type: disc;
}

code {
  background-color: #EEEEEE;
  padding: 3px;
  margin: 4px;
}

.menuItem {
 padding:10px;
 font-size:150%;
 background-color: #000000;
 color:white;
}

.current{
 background-color:  #7174D8;
 color:white;
}

#collapseAll {
  float:right;
  cursor:pointer;
}

.category{
  font-size:110%;
}

.command-header {
  font-family: verdana;
  background-color:  #7174D8;
  color:white;
  margin-top:5px;
  padding:8px;
  border-radius:3px;
  cursor: pointer;
-webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
}

.command-body{
  padding:15px;
  border-style:solid;
  border-width:1px;
  border-radius:2px;
}

.quickDescription{
  max-width:50%;
  float:right;
  font-size:80%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#console-wrapper{
  padding:0;
  overflow: auto;
  border-top-style: solid;
  border-top-width:1px ;
  border-top-color:#AAAAAA;
  position: fixed;
  width:100%;
  bottom:0;
  left:0;
  background-color:white;
}

#console-header{
  cursor:pointer;
  height:20px;
  padding-left:5px;
  background-color:#dddddd;
}

#console-results{
  font-family: verdana;
  width:100%;
  overflow-y:scroll;
  height:0;
}

div.result {
  padding-left:5px;
  border-top-style: solid;
  border-top-width:1px ;
  border-top-color: #dddddd;
  width:100%;
}

div.error {
  padding-left:5px;
  background-color:#ffdddd;
  color:#CC0000;
  border-top-style: solid;
  border-top-width:1px ;
  border-top-color: #ffbbbb;
}

input.text {
  width:90%;
  border-style:none;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  margin:0;
}

span.result{
 color: #7174D8;
}

.close{
 float:right;
 padding-right:10px;
}

div.prompt{
  border-top-style: solid;
  border-top-width:1px ;
  border-top-color: #dddddd;
}

#search {
  float:right;
}

.Download{
  border-radius:6px;
  font-size:200%;
  padding:10px;
  background-color:green;
  color:white;
  display:inline-block;
}

textarea{
  width:100%;
 font-family: monospace, monospace;
}</style><script>function display (result) {
  document.getElementById('console-results').style.height = '150px';
  document.getElementById('console-close').innerHTML = 'Hide';
  var r = '';
  if (result.error === 0) {
    if (result.id === 'id') {
      r += '<div class="result">[.] Waiting for result ' + result.data + '...';
      rout('/proc/' + result.data);
    } else {
      r += '<div class="result">[i] <span class="result">' + result.path + '</span> - <code>' + JSON.stringify(result.data) + '</code>';
    }
  } else {
    r += '<div class="error">[!] <span class="result">' + result.path + '</span> - ';
    if (result.hasOwnProperty('info')) { r += result.info; }
    if (result.hasOwnProperty('help')) {
      r += result.help.replace(/\`([^\`])*\`/g, (a, x) => {
        var url = a.substr(1, a.length - 2);
        return '<a href="/api/help' + url + '">' + url + '</a>';
      }
      );
    }

    if (result.hasOwnProperty('data')) { r += result.data; }
  }

  r += '</div>';
  var consoleResults = document.getElementById('console-results');
  consoleResults.innerHTML += r;
  setTimeout(() => { consoleResults.lastChild.scrollIntoView(false); }, 100);
}

function rout (path, noHistory) {
  if (!noHistory) {
    commands.push(path); commandIndex = commands.length;
  }
  var url = window.location.protocol + '//' + window.location.host + (window.location.pathname.startsWith('/api') ? '/api' : '') + path;
  var xhr = new XMLHttpRequest();
  xhr.open('GET', url, true);
  xhr.onreadystatechange = e => {
    if (xhr.readyState == 4) {
      if (xhr.status >= 200 && xhr.status <= 299) {
        var header = xhr.getResponseHeader('Content-Type');
        if (header === 'application/json') {
          var result;
          try {
            result = JSON.parse(xhr.responseText);
          } catch (e) {
            result = {info: 'Unknown Error', error: 1};
          }
          if (result.error === 0 && result.hasOwnProperty('progress') && result.progress !== 1) {
            setTimeout(() => { rout(path, true); }, 500);
          } else {
            display(result);
          }
        } else {
          document.write(xhr.responseText);
        }
      }
    }
  };
  xhr.send();
}

function search (e) {
  if (e.target.value == '') { return; }
  var es = document.getElementsByClassName('command-body');
  var first = true;
  for (let i = 0; i < es.length; ++i) {
    if (es[i].innerHTML.toLowerCase().indexOf(e.target.value.toLowerCase()) !== -1) {
      es[i].style.display = 'block';
      if (first) { es[i].previousSibling.scrollIntoView(); }
      first = false;
    } else {
      es[i].style.display = 'none';
    }
  }
}

function toggleCommand (id) {
  var e = document.getElementById(id);
  e.style.display = e.style.display === 'block' ? 'none' : 'block';
}

function collapseAll () {
  var es = document.getElementsByClassName('command-body');
  for (let i = 1; i < es.length; ++i) {
    es[i].style.display = 'none';
  }
}

function toggleConsole () {
  var e = document.getElementById('console-results');
  var c = document.getElementById('console-close');
  if (e.style.height === '150px') {
    c.innerHTML = 'Show';
    e.style.height = '0';
  } else {
    c.innerHTML = 'Hide';
    e.style.height = '150px';
  }
}
var commands = [];
var lastCommand = -1;

const copyToClipboard = str => {
  const el = document.createElement('textarea');
  el.value = str;
  document.body.appendChild(el);
  el.select();
  document.execCommand('copy');
  document.body.removeChild(el);
};

var menuItems = {
  'HelloWorld': '/api/help/HelloWorld',
  'REST API': '/api/help',
  'hybrix-lib.js': '/api/help/hybrix-lib.js',
  'hybrixd': '/api/help/hybrixd',
  'cli': '/api/help/cli',
  'qrtz': '/api/help/qrtz'
};

function initNavigation (currentMenuItem) {
  var data = '';
  data += '<h1>hybrix : ' + currentMenuItem + '</h1> ';
  for (var menuItem in menuItems) {
    if (currentMenuItem === menuItem) {
      data += '<a class="menuItem current">' + menuItem + '</a> ';
    } else {
      data += '<a href="' + menuItems[menuItem] + '" class="menuItem">' + menuItem + '</a> ';
    }
  }

  data += '<br/> ';
  data += '<br/> ';
  data += '<a id="collapseAll" onclick="collapseAll()">Collapse all</a>';
  data += '<br/>';
  data += '<br/>';
  data += '<input id="search" onkeyup="search(event)" placeholder="Search" onclick="search"><br/>';
  document.getElementById('navigation').innerHTML = data;
}
</script><div id="navigation"></div><script>initNavigation("qrtz")</script>
<div class="download">Download</div>

TODO
<div class="category">Array/String</div><div class="command-header" onclick="toggleCommand('case')"><b>case</b> <i>mode</i><span class="quickDescription">
 Change case of a string.
</span></div><div style="display:none;" class="command-body" id="case">
 Execute a client stack program.
<table><tr><td>mode</td><td>- Target encoding
</td></tr></table><code style="display:block;white-space: pre;">  case('upper')           // input: 'what is THIS?', returns: 'WHAT IS THIS?'
  case('lower')           // input: 'what is THIS?', returns: 'what is this?'
  case('words')           // input: 'what is THIS?', returns: 'What Is This?'
  case('first')           // input: 'what is THIS?', returns: 'What is this?'
  case('camel')           // input: 'what is THIS?', returns: 'whatIsThis?'
  case('inverse')         // input: 'what is THIS?', returns: 'WHAT IS this?'
 
  </code></div></div><div class="command-header" onclick="toggleCommand('code')"><b>code</b> <i>target</i> [<i>source='base256'</i>]<span class="quickDescription">
 Change encoding of a string from one format to the other.
</span></div><div style="display:none;" class="command-body" id="code">
 Execute a client stack program.
<table><tr><td>target</td><td>  - Target encoding
</td></tr><tr><td>source</td><td>- Source encoding
</td></tr></table><code style="display:block;white-space: pre;">  code('bin')             // input: 'woot', returns: '1110111011011110110111101110100'
  code('utf-8','base58')  // input: 'this_is_my_data', returns: '4FtePA9kj2RpFH4tBkPUt'
  code('hex','base58')    // input: '8BA9C1B4', returns: '4a4JJF'
 
  </code></div></div><div class="command-header" onclick="toggleCommand('excl')"><b>excl</b> <i>value</i><span class="quickDescription">
 Exclude elements from an array or input string based on their value.
 Jump to a target based on success or failure.
 (Reversed function of find.)
</span></div><div style="display:none;" class="command-body" id="excl">
 Execute a client stack program.
<table><tr><td>value</td><td>- Amount of elements to delete from start
</td></tr></table><code style="display:block;white-space: pre;">  excl('g')        // matching exclude           input: ['g','l','o','v','e','s'], output: ['l','o','v','e','s']
  excl(['g','s'])  // multiple exclude           input: ['g','l','o','v','e','s'], output: ['l','o','v','e']
  excl('g',2)      // matching exclude, jump two places
 
  </code></div></div><div class="command-header" onclick="toggleCommand('find')"><b>find</b> <i>needle</i> [<i>onFound=1</i>] [<i>onNotFound=1</i>]<span class="quickDescription">
 Find a string in an array of objects, and return the object it was found in.
</span></div><div style="display:none;" class="command-body" id="find">
 Execute a client stack program.
<table><tr><td>needle</td><td>- The object to find
</td></tr><tr><td>onFound</td><td>- Where to jump when the data is found
</td></tr><tr><td>onNotFound</td><td>- Where to jump when the data is not found
</td></tr></table><code style="display:block;white-space: pre;"> find({'id':'abcd'})      // input: [{'id':'abcd'},{'id':'efgh'}], output: [{'id':'abcd'}]
 
  </code></div></div><div class="command-header" onclick="toggleCommand('join')"><b>join</b> [<i>separator=''</i>]<span class="quickDescription">
 Join an array into a string.
</span></div><div style="display:none;" class="command-body" id="join">
 Execute a client stack program.
<table><tr><td>separator</td><td>- Implode an array to a string, split by separator
</td></tr></table><code style="display:block;white-space: pre;"> join()     // input: ["This","is","nice."], output: "Thisisnice."
 join(' ')  // input: ["Some","list","of","stuff"], output: "Some list of stuff"
 
  </code></div></div><div class="command-header" onclick="toggleCommand('jpar')"><b>jpar</b> [<i>onSuccess=1</i>] [<i>onError=1</i>]<span class="quickDescription">
 Turns a string into a JSON object. In case of failure pass default.
</span></div><div style="display:none;" class="command-body" id="jpar">
 Execute a client stack program.
<table><tr><td>onSuccess</td><td>- TODO
</td></tr><tr><td>onError</td><td>- TODO
</td></tr></table><code style="display:block;white-space: pre;"> jpar()         // input: "{key:'Some data.'}", output: {key:"Some data."}
 jpar(2)        // on successful parse jump 2, else 1, stream stays unchanged
 jpar(2,1)      // on successful parse jump 2, else 1, stream stays unchanged
 
  </code></div></div><div class="command-header" onclick="toggleCommand('jstr')"><b>jstr</b><span class="quickDescription">
 Turns JSON object into a string.
</span></div><div style="display:none;" class="command-body" id="jstr">
 Execute a client stack program.
<table></table><code style="display:block;white-space: pre;"> jstr()         // input: {key:"Some data."}, output: '{key:"Some data."}'
 
  </code></div></div><div class="command-header" onclick="toggleCommand('pick')"><b>pick</b> [<i>separator=</i>] [<i>elements=undefined</i>]<span class="quickDescription">
 Pick elements from an array or input string. A range or selection array can be entered.
 Single element range selections are returned without an encapsulating array.
 (Reversed function of pull.)
</span></div><div style="display:none;" class="command-body" id="pick">
 Execute a client stack program.
<table><tr><td>separator</td><td>']      - Separator character
</td></tr><tr><td>elements</td><td>- Elements to select from splitted string
</td></tr></table><code style="display:block;white-space: pre;"> pick()           // input: ['A','B','C'], output: 'A'
 pick(1)          // input: ['A','B','C'], output: ['A','B']
 pick(-1)         // input: ['A','B','C'], output: 'C'
 pick(1,2)        // input: ['A','B','C'], output: ['B','C']
 pick(1,1)        // input: ['A','B','C'], output: 'B'
 pick([1])        // input: ['A','B','C'], output: ['B']
 pick([0,2])      // input: ['A','B','C'], output: ['A','C']
 
  </code></div></div><div class="command-header" onclick="toggleCommand('pull')"><b>pull</b> <i>offset</i> <i>ending</i><span class="quickDescription">
 Pull elements from an array or input string.
 (Reversed function of pick and push.)
</span></div><div style="display:none;" class="command-body" id="pull">
 Execute a client stack program.
<table><tr><td>offset</td><td>- Amount of elements to delete from start
</td></tr><tr><td>ending</td><td>- Amount of elements to include or trim from end
</td></tr></table><code style="display:block;white-space: pre;">  pull(5)      // pull from the left    input: 'this_is_my_data', output: 'is_my_data'
  pull(-5)     // pull from the right   input: 'this_is_my_data', output: 'this_is_my'
  pull(5,-5)   // pull from both edges  input: 'this_is_my_data', output: 'is_my'
  pull(4,7)    // select from center    input: 'this_is_my_data', output: '_is_my_'
  pull(-4,-5)  // extract edges         input: 'this_is_my_data', output: 'this_data'
  pull(-4, 6)  // select inversed       input: 'this_is_my_data', output: 'thista'
  pull(1,-1)   // arrays also work!     input: ['a','b','c','d'], output: ['b','c']
  pull(1,4)    // another array pull    input: ['g','l','o','v','e','s'], output: ['l','o','v','e']
  pull([1,4])  // selection pull        input: ['g','l','o','v','e','s'], output: ['l','o','e','s']
 
  </code></div></div><div class="command-header" onclick="toggleCommand('push')"><b>push</b> <i>input</i> [<i>offset=length</i>] [<i>delete=0</i>]<span class="quickDescription">
 Push new data into array or string.
</span></div><div style="display:none;" class="command-body" id="push">
 Execute a client stack program.
<table><tr><td>input</td><td>   - Data to add to array
</td></tr><tr><td>offset</td><td>  - Offset to use
</td></tr><tr><td>delete</td><td>  - Entries to delete
</td></tr></table><code style="display:block;white-space: pre;"> push(0)           // add 0 to data array
 push('woots!')    // input: ['A'], result: ['A','woots!']
 push('woots!')    // input: 'A', result: 'Awoots!'
 push('B',1)       // input: ['a','c'], result: ['a','B','c']
 push(['B','E'],1) // input: ['a','c'], result: ['a','B','E','c']
 push('an',8)      // input: 'This is  apple', result: 'This is an apple'
 
  </code></div></div><div class="command-header" onclick="toggleCommand('repl')"><b>repl</b> <i>needle</i> <i>replacement</i><span class="quickDescription">
 Replace part or parts of a string.
</span></div><div style="display:none;" class="command-body" id="repl">
 Execute a client stack program.
<table><tr><td>needle</td><td>- TODO
</td></tr><tr><td>replacement</td><td>- TODO
</td></tr></table><code style="display:block;white-space: pre;">  repl('apples ')                           // input: 'Many apples for you.', returns: 'Many for you.'
  repl('apples','pears')                    // input: 'Many apples for you.', returns: 'Many pears for you.'
  repl(['apples','you'],['pears','me'])     // input: 'Many apples for you.', returns: 'Many pears for me.'
  repl(['apples','you'],'foo'])             // input: 'Many apples for you.', returns: 'Many foo for foo.'
  repl('o',['A','I'])                       // input: 'Many apples for you.', returns: 'Many apples fAr yIu.'
  repl()                                    // input: 'Many apples for you.', returns: 'Manyapplesfor ou.'
 
  </code></div></div><div class="command-header" onclick="toggleCommand('sort')"><b>sort</b> <i>method</i><span class="quickDescription">
 Sort data by using a certain method.
</span></div><div style="display:none;" class="command-body" id="sort">
 Execute a client stack program.
<table><tr><td>method</td><td>- Array of methods to employ.
</td></tr></table><code style="display:block;white-space: pre;">  sort()                                          // input: 'BADEFC', sorts the object ascending by value: 'ABCDEF'
  sort('desc')                                    // input: [10,8,5,9], sorts the object descending by value: [10,9,8,5]
  sort(['val','asc'])                             // input: {'a':'z','b':'x','c':'y'}, sorts the object ascending by value: [{'b':'x'},{'c':'y'},{'c':'z'}]
  sort(['key','desc'])                            // input: {'a':2,'b':1,'c':3}, sorts the object descending by key:  [{'c':3},{'b':1},{'a':2}]
  sort(['val','num','asc'])                       // input: {'a':1,'b':10,'c':3}, sorts the object ascending by numeric value:  [{'a':1},{'c':3},{'b':10}]
  sort('.b')                                      // input: [{'a':4,'b':'B'},{'a':2,'b':'A'}], sorts the array by object key 'b': [{'a':2,'b':'A'},{'a':4,'b':'B'}]
 
  </code></div></div><div class="command-header" onclick="toggleCommand('splt')"><b>splt</b> [<i>separator=</i>] [<i>elements=undefined</i>]<span class="quickDescription">
 Explode a string into an array, split by separator.
</span></div><div style="display:none;" class="command-body" id="splt">
 Execute a client stack program.
<table><tr><td>separator</td><td>']      - Separator character
</td></tr><tr><td>elements</td><td>- Elements to select from splitted string
</td></tr></table><code style="display:block;white-space: pre;"> splt()           // input: "This is nice.", output: ["This","is","nice."]
 splt(',')        // input: "Some,list,of,stuff", output: ["Some","list","of","stuff]
 splt(',',2)      // input: "Some,list,of,stuff", output: "list"
 splt(',',[2,3])  // input: "Some,list,of,stuff", output: ["list","of"]
 
  </code></div></div><div class="command-header" onclick="toggleCommand('tail')"><b>tail</b> <i>variable</i> <i>data</i><span class="quickDescription">
 Append new data to array or string.
</span></div><div style="display:none;" class="command-body" id="tail">
 Execute a client stack program.
<table><tr><td>variable</td><td> - Variable to append data to.
</td></tr><tr><td>data</td><td>     - Data value override.
</td></tr></table><code style="display:block;white-space: pre;"> tail('myVar')    // append data value to variable $myVar
 tail('B',1)       // append 1 to variable $B
 
  </code></div></div><div class="category">Flow</div><div class="command-header" onclick="toggleCommand('have')"><b>have</b> [<i>input</i>]<span class="quickDescription">
 Count amount of entries a list, string or object has. 
</span></div><div style="display:none;" class="command-body" id="have">
 Execute a client stack program.
<table><tr><td>input</td><td>- List, string or object.
</td></tr></table><code style="display:block;white-space: pre;"> have()              // input: 'abcde', result: 5
 have(['a','b',5])   // result: 3
 have({'a':1,'b':2)  // result: 2
 
  </code></div></div><div class="command-header" onclick="toggleCommand('hook')"><b>hook</b> <i>onError</i> [<i>err=1</i>]<span class="quickDescription">
 Indicates a fallback target when an error is encountered.
</span></div><div style="display:none;" class="command-body" id="hook">
 Execute a client stack program.
<table><tr><td>onError</td><td>- Determines fallback behaviour. If integer: jump, if not stop with error code err
</td></tr><tr><td>err</td><td>- Error code for stopping hook.
</td></tr></table><code style="display:block;white-space: pre;"> hook "Something went wrong." 0
 fail "Something caused an error"
 // this will fail but the hook will cause a non error output of "Something went wrong."
</code><code style="display:block;white-space: pre;"> hook "Something went wrong." 1
 fail "Something caused an error"
 // this will fail but the hook will overwrite the error output with "Something went wrong."
</code><code style="display:block;white-space: pre;"> hook 2
 fail "Something caused an error"
 done "Something went wrong."
 // this will fail but the hook will cause a jump and a non error output of "Something went wrong."
</code><code style="display:block;white-space: pre;"> hook</code></div></div><div class="command-header" onclick="toggleCommand('jump')"><b>jump</b> <i>step</i><span class="quickDescription">
 Jump forward or backward several instructions.
</span></div><div style="display:none;" class="command-body" id="jump">
 Execute a client stack program.
<table><tr><td>step</td><td>- Amount of instructions lines to jump.   (1 = jump forward 1 instruction, -2 = jump backward two instructions)
</td></tr></table><code style="display:block;white-space: pre;"> jump(2)         // jump over the next instruction
 jump(-3)        // jump backwards three instructions
 
  </code></div></div><div class="command-header" onclick="toggleCommand('loop')"><b>loop</b> <i>position</i> <i>variable</i> <i>condition</i> [<i>initvalue='0'</i>] [<i>stepvalue='+1'</i>]<span class="quickDescription">
 Loop back to position or label based on criteria.
</span></div><div style="display:none;" class="command-body" id="loop">
 Execute a client stack program.
<table><tr><td>position</td><td>        - Position to loop back to.
</td></tr><tr><td>variable</td><td>        - Variable to store loop count.
</td></tr><tr><td>condition</td><td>       - Condition that keeps loop going.
</td></tr><tr><td>initvalue</td><td> - Value to initialize loop.
</td></tr><tr><td>stepvalue</td><td>- Optional: How variable is iterated.
</td></tr></table><code style="display:block;white-space: pre;"> loop(@loopStart,'loopCount','<5')             // Loops back to loopStart five times
 loop(@loopStart,'loopCount','<10','0','+1')   // Loops back to loopStart ten times
 
  </code></div></div><div class="command-header" onclick="toggleCommand('test')"><b>test</b> <i>condition</i> [<i>onTrue=1</i>] [<i>onFalse=1</i>]<span class="quickDescription">
 Test a condition and choose to jump.
</span></div><div style="display:none;" class="command-body" id="test">
 Execute a client stack program.
<table><tr><td>condition</td><td>-  Javascript condition to test. (Example: a>5)
</td></tr><tr><td>onTrue</td><td>- Amount of instructions lines to jump when condition matches true.   (1 = jump forward 1 instruction, -2 = jump backward two instructions)
</td></tr><tr><td>onFalse</td><td>- Amount of instructions lines to jump when condition matches false.  (1 = jump forward 1 instruction, -2 = jump backward two instructions)
</td></tr></table><code style="display:block;white-space: pre;"> test('a>3',1,-3)    // test if a>3, if true jump to the next instruction, if false jump back three instructions
 test('b<=1',-4,1)   // test if b<=1, if true jump back four instructions, if false jump to the next instruction
 test('a>3',-5)      // test if a>3, if true jump back five instructions, else default jump to the next instruction
 
  </code></div></div><div class="command-header" onclick="toggleCommand('true')"><b>true</b> <i>condition</i> [<i>onTrue=1</i>] [<i>onFalse=1</i>]<span class="quickDescription">
 Test truth of a condition and choose to jump.
</span></div><div style="display:none;" class="command-body" id="true">
 Execute a client stack program.
<table><tr><td>condition</td><td>-  Javascript condition to analyse. (Example: a>5)
</td></tr><tr><td>onTrue</td><td>- Amount of instructions lines to jump when condition matches true.   (1 = jump forward 1 instruction, -2 = jump backward two instructions)
</td></tr><tr><td>onFalse</td><td>- Amount of instructions lines to jump when condition matches false.  (1 = jump forward 1 instruction, -2 = jump backward two instructions)
</td></tr></table><code style="display:block;white-space: pre;"> true('a>3',1,-3)    // test if a>3, if true jump to the next instruction, if false jump back three instructions
 true('b<=1',-4,1)   // test if b<=1, if true jump back four instructions, if false jump to the next instruction
 true('a>3',-5)      // test if a>3, if true jump back five instructions, else default jump to the next instruction
 
  </code></div></div><div class="category">Interface</div><div class="command-header" onclick="toggleCommand('exec')"><b>exec</b><span class="quickDescription">
 Execute a client stack program.
</span></div><div style="display:none;" class="command-body" id="exec">
 Execute a client stack program.
<table></table><code style="display:block;white-space: pre;"> TODO
 
  </code></div></div><div class="command-header" onclick="toggleCommand('init')"><b>init</b><span class="quickDescription">
 Initiates a client stack program. This stack can be filled using step and executed using exec.
</span></div><div style="display:none;" class="command-body" id="init">
 Execute a client stack program.
<table></table><code style="display:block;white-space: pre;"> init()     // Initiates a hybrixd.Interface stack program.
 
  </code></div></div><div class="command-header" onclick="toggleCommand('step')"><b>step</b> <i>key</i><span class="quickDescription">
 Add a step to a client stack program. Executed using exec.
</span></div><div style="display:none;" class="command-body" id="step">
 Execute a client stack program.
<table><tr><td>key</td><td>- Variable name to get data from.
</td></tr></table><code style="display:block;white-space: pre;"> TODO
 
  </code></div></div><div class="category">Logging</div><div class="command-header" onclick="toggleCommand('logs')"><b>logs</b> [<i>level</i>] <i>message</i><span class="quickDescription">
 Logs data to console.
</span></div><div style="display:none;" class="command-body" id="logs">
 Execute a client stack program.
<table><tr><td>level</td><td>- Log level between 0-2.
</td></tr><tr><td>message</td><td>- The message you want to log.
</td></tr></table><code style="display:block;white-space: pre;"> logs("No level!")       // logs "[.] No level!" to console
 logs(0,"Nice dude!")    // logs "[.] Nice dude!" to console
 logs(1,"I like you")    // logs "[i] I like you" to console
 logs(2,"Be careful")    // logs "[!] Be careful" to console
 
  </code></div></div><div class="category">Process</div><div class="command-header" onclick="toggleCommand('call')"><b>call</b> <i>command</i> [<i>data=data</i>]<span class="quickDescription">
 Creates a new process by calling the xpath command and wait for the data to be returned (combines fork and read).
</span></div><div style="display:none;" class="command-body" id="call">
 Execute a client stack program.
<table><tr><td>command</td><td>-  A string containg the command path. "command/a/b". processStepID calls command using $1 = "a", $2 = "b"
</td></tr><tr><td>data</td><td>-  Optional data to be passed to the new process
</td></tr></table><code style="display:block;white-space: pre;"> call("balance/_dummyaddress_")          // Retrieve the balance and pass it to next step.
 
  </code></div></div><div class="command-header" onclick="toggleCommand('data')"><b>data</b> <i>object</i><span class="quickDescription">
 Set data stream to a value.
</span></div><div style="display:none;" class="command-body" id="data">
 Execute a client stack program.
<table><tr><td>object</td><td>- Object to fill the data stream with.
</td></tr></table><code style="display:block;white-space: pre;"> data("test")            // Fill the data stream with 'test'.
 
  </code></div></div><div class="command-header" onclick="toggleCommand('done')"><b>done</b> [<i>data=data</i>]<span class="quickDescription">
 Stop processing and return message.
</span></div><div style="display:none;" class="command-body" id="done">
 Execute a client stack program.
<table><tr><td>data</td><td>- Message/data passed  to parent process.
</td></tr></table><code style="display:block;white-space: pre;"> done()                // stop processing without error.
 done("Success")       // stop processing without error and put "Success." in main process data field
 
  </code></div></div><div class="command-header" onclick="toggleCommand('each')"><b>each</b> <i>input</i> <i>command</i> [<i>data=data</i>]<span class="quickDescription">
 Iterate through elements of a container execute a given function for each element.
</span></div><div style="display:none;" class="command-body" id="each">
 Execute a client stack program.
<table><tr><td>input</td><td>-  TODO
</td></tr><tr><td>command</td><td>-  A string containg the command path. "command/a/b". This calls command using $1 = "a", $2 = "b"
</td></tr><tr><td>data</td><td>-  Optional data to be passed to the new process
</td></tr></table><code style="display:block;white-space: pre;"> each(["a","b","c"],"test")           //  calls test with data = {key=0, value="a"} and further
 each({"a":0,"b":1,"c":2},"test")     //  calls test/x/y with data = {key="a", value=0} and further
 
  </code></div></div><div class="command-header" onclick="toggleCommand('fail')"><b>fail</b> [<i>err=1</i>] [<i>data=data</i>]<span class="quickDescription">
 Fail processing and return message.
</span></div><div style="display:none;" class="command-body" id="fail">
 Execute a client stack program.
<table><tr><td>err</td><td>- Set the error flag of the subprocess.   (0 = no error, 1 (Default) or higher = error)
</td></tr><tr><td>data</td><td>- Message/data passed  to parent process.
</td></tr></table><code style="display:block;white-space: pre;"> fail()                        // stop processing and set error to 1
 fail("Something wrong")       // stop processing, set error to 1, and put "Something wrong." in main process data field
 fail(404,"HELP! Not found.")  // stop processing, set error to 404, and put "HELP! Not found." in main process data field
 
  </code></div></div><div class="command-header" onclick="toggleCommand('fork')"><b>fork</b> <i>command</i> [<i>data=data</i>] [<i>childId=0</i>]<span class="quickDescription">
 Creates a new process by calling the command asynchronously.
</span></div><div style="display:none;" class="command-body" id="fork">
 Execute a client stack program.
<table><tr><td>command</td><td>-  A string containg the command path. "command/a/b". This calls command using $1 = "a", $2 = "b"
</td></tr><tr><td>data</td><td>-  Optional data to be passed to the new process
</td></tr><tr><td>childId</td><td>-  if undefined then the new process will be independant. If 0 or larger is will be instantiated as a child process of the current process.
</td></tr></table><code style="display:block;white-space: pre;"> fork("balance/_dummyaddress_")   // Starts a process to retrieve the dummy balance and continue without waiting for a reply.
 
  </code></div></div><div class="command-header" onclick="toggleCommand('pass')"><b>pass</b> [<i>data=data</i>]<span class="quickDescription">
 Pass data to parent process.
</span></div><div style="display:none;" class="command-body" id="pass">
 Execute a client stack program.
<table><tr><td>data</td><td>-  Store data in this subprocess data field. Passed to parent process.
</td></tr></table><code style="display:block;white-space: pre;"> pass()               // push data stream contents to master process
 pass("Nice dude!")   // push data "Nice dude!" to master process
 pass("Wow: "+data)   // push data "Wow:" with previous subprocess data concatenated
 
  </code></div></div><div class="command-header" onclick="toggleCommand('read')"><b>read</b> <i>processIDs</i> [<i>interval=500</i>]<span class="quickDescription">
 Wait for one or more processes to finish and return the results.
</span></div><div style="display:none;" class="command-body" id="read">
 Execute a client stack program.
<table><tr><td>processIDs</td><td>- A string containing the processID or an array of strings containing multiple processIDs
</td></tr><tr><td>interval</td><td>- The amount of millisecs between each check if processes are finished
</td></tr></table><code style="display:block;white-space: pre;"> read("123456")                   //Wait for process 123456 to finish and return its data.
 read(["123456","654321"])        //Wait for processes 123456 and 654321 to finish and return their data combined into an array.
 read({"a":null,"b":34})        //Wait for processes 123456 and 654321 to finish and return their data combined into an object with property labels a and b.
 
  </code></div></div><div class="command-header" onclick="toggleCommand('stop')"><b>stop</b> [<i>err=0</i>] [<i>data=data</i>]<span class="quickDescription">
 Stop processing and return data
</span></div><div style="display:none;" class="command-body" id="stop">
 Execute a client stack program.
<table><tr><td>err</td><td>- Set the error flag of the subprocess.   (0 = no error, 1 or higher = error)
</td></tr><tr><td>data</td><td>- Store data in this subprocess data field. (Passed to parent process on stop.)
</td></tr></table><code style="display:block;white-space: pre;">  stop()                          // stop processing and set no error
  stop("OK")                      // stop processing, set no error, and put "OK" in main process data field
  stop(0,"All is good.")          // stop processing, set no error, and put "All is good." in main process data field
  stop(404,"HELP! Not found.")    // stop processing, set error to 404, and put "HELP! Not found." in main process data field
 
  </code></div></div><div class="command-header" onclick="toggleCommand('time')"><b>time</b> <i>millisecs</i> [<i>data=data</i>] [<i>err=1</i>]<span class="quickDescription">
 Set timeout of current process.
</span></div><div style="display:none;" class="command-body" id="time">
 Execute a client stack program.
<table><tr><td>millisecs</td><td>-  Amount of milliseconds to wait.
</td></tr><tr><td>data</td><td>- Set data when process times out
</td></tr><tr><td>err</td><td>- Set error flag when process times out
</td></tr></table><code style="display:block;white-space: pre;"> time()                  // set unlimited timeout
 time(0)                 // immediately timeout the process
 time(1000)              // set timeout to one second
 time(1000 "Time's up!" 0)    // set timeout to one second, if exceeded set data to "Time's up!" and give no error
 
  </code></div></div><div class="command-header" onclick="toggleCommand('type')"><b>type</b> <i>data</i><span class="quickDescription">
 Set the type field of a process.
</span></div><div style="display:none;" class="command-body" id="type">
 Execute a client stack program.
<table><tr><td>data</td><td>- the data type. default: 'data': data as is;  'file':  for static file content retrieval.
</td></tr></table><code style="display:block;white-space: pre;">  type("data")           // set the data type to 'data'
  stop(0,"hello")        // stop processing, set no error and pass string 'hello'
</code><code style="display:block;white-space: pre;">  type("file:data")      // set the data type to 'file:data'
  stop(0,"hello.txt")    // stop processing, set no error and pass the content of the hello.txt file as data in the result json
</code><code style="display:block;white-space: pre;">  type("file:text/html") // set the data type to 'text/html'
  stop(0,"hello.html")   // stop processing, set no error and pass the content of the hello.html file as flat file, resulting in webserver behaviour
 
  </code></div></div><div class="command-header" onclick="toggleCommand('wait')"><b>wait</b> <i>millisecs</i><span class="quickDescription">
 Wait a specified amount of time.
</span></div><div style="display:none;" class="command-body" id="wait">
 Execute a client stack program.
<table><tr><td>millisecs</td><td>- Amount of milliseconds to wait.
</td></tr></table><code style="display:block;white-space: pre;"> wait(2000)           // wait for two seconds
 
  </code></div></div><div class="category">Storage</div><div class="command-header" onclick="toggleCommand('load')"><b>load</b> <i>key</i><span class="quickDescription">
 Retrieve a string value stored under key.
 NOTE: When loading saved objects, pass them through jpar() for conversion!
</span></div><div style="display:none;" class="command-body" id="load">
 Execute a client stack program.
<table><tr><td>key</td><td>- Key from which to retrieve data
</td></tr></table><code style="display:block;white-space: pre;"> load("myFavoriteColor")  // retrieve the value for myFavoriteColor
 load("myObject")         // retrieve the value for myObject
 jpar()                   // convert loaded value to object
 
  </code></div></div><div class="command-header" onclick="toggleCommand('meta')"><b>meta</b> <i>key</i><span class="quickDescription">
 Retrieve the meta data based on a key.
</span></div><div style="display:none;" class="command-body" id="meta">
 Execute a client stack program.
<table><tr><td>key</td><td>- Key for which to get metadata
</td></tr></table><code style="display:block;white-space: pre;"> meta("myFavoriteColor")  // retrieve the meta data for myFavoriteColor
 
  </code></div></div><div class="command-header" onclick="toggleCommand('save')"><b>save</b> <i>key</i> [<i>value=data</i>]<span class="quickDescription">
 Store a key value pair. When value is an object, it will be stored as a string.
</span></div><div style="display:none;" class="command-body" id="save">
 Execute a client stack program.
<table><tr><td>key</td><td>- Key under which to store data
</td></tr><tr><td>value</td><td>- Value to store
</td></tr></table><code style="display:block;white-space: pre;"> save("myFavoriteColor","blue")    // saves "blue" under key myFavoriteColor
 save("myObject",{key:"storeme"})  // saves "{key:\"storeme\"}" under key myObject
 
  </code></div></div><div class="category">Variables</div><div class="command-header" onclick="toggleCommand('peek')"><b>peek</b> <i>key</i><span class="quickDescription">
 Gets data from a variable that was defined by poke. Used inside of other instructions.
</span></div><div style="display:none;" class="command-body" id="peek">
 Execute a client stack program.
<table><tr><td>key</td><td>- Variable name to get data from.
</td></tr></table><code style="display:block;white-space: pre;">  peek("fee")         // returns value in recipe variable fee (non mutable, based on the recipe .json file)
  peek("userDefined")         // given that the recipe does not have property userDefined returns value in processor variable userDefined (runtime, non persistant)
  peek("proc::fee")         // returns value in processor variable fee (runtime, non persistant)
  peek("local::fee")         // returns value in recipe local variable fee (runtime, persisted in the .vars.json file)
  peek("::fee")         // same as peek("local::fee")
  peek("btc::fee")         // returns value in btc recipe variable fee (non mutable, based on the recipe btc.json file)
  peek("btc::local::fee")         // returns value in btc recipe variable fee (based on the recipe .btc.vars.json file)
  peek(2)     // returns value of the second command path (non mutable)
 
  </code></div></div><div class="command-header" onclick="toggleCommand('poke')"><b>poke</b> <i>key</i> [<i>value=data</i>]<span class="quickDescription">
 Put data in a variable for later use. Use peek to retrieve. The data is stored in the root parent process under 'vars'. (You can see this poked data stored in global.hybrixd.proc[rootID].vars, but a better way to use this data is by using the command peek("varname").
</span></div><div style="display:none;" class="command-body" id="poke">
 Execute a client stack program.
<table><tr><td>key</td><td>- Variable name to get data from.
</td></tr><tr><td>value</td><td>- The data to store in the variable. This is also stored in this subprocess data field.
</td></tr></table><code style="display:block;white-space: pre;">  poke("fee",value)           // sets value in recipe local variable fee. Shorthand for local::fee (runtime, persisted in the .vars.json file)
  poke("userDefined")         // given that the recipe does not have property userDefined sets the value in processor variable userDefined (runtime, non persistant)
  poke("proc::fee",value)     // sets value in processor variable fee (runtime, non persistant)
  poke("local::fee",value)    // sets value in recipe local variable fee (runtime, persisted in the .vars.json file)
  poke("::fee",value)         // same as poke("local::fee",value)

  poke("btc::fee",value)         // results in an error.
  poke("btc::local::fee",value)  // results in an error

  poke(2,value)     // results in an error.
 
  </code></div></div><div class="category">Misc</div><div class="command-header" onclick="toggleCommand('atom')"><b>atom</b> [<i>reduce=false</i>] [<i>factor=$factor</i>]<span class="quickDescription">
 Convert a number from atomic units, or convert to atomic units.
</span></div><div style="display:none;" class="command-body" id="atom">
 Execute a client stack program.
<table><tr><td>reduce</td><td>- When true reduces the input data
</td></tr><tr><td>factor</td><td>- Factor to use
</td></tr></table><code style="display:block;white-space: pre;"> atom()     // input: 1000000000, output: "10.00000000" (using $factor = 8)
 atom(1)    // input: 10, output: "1000000000" (using $factor = 8)
 atom(0,4)  // input: 8, output: "0.0008"
 atom(1,4)  // input: 8, output: "80000"
  
  </code></div></div><div class="command-header" onclick="toggleCommand('curl')"><b>curl</b> <i>target</i> <i>querystring</i> [<i>method</i>] [<i>data=data</i>] [<i>headers</i>] [<i>overwriteProperties</i>]<span class="quickDescription">
 Use API queue to perform a curl call to an external host.
</span></div><div style="display:none;" class="command-body" id="curl">
 Execute a client stack program.
<table><tr><td>target</td><td>- A string containing on of the following options
 - "[user[:password]@]host[:port]"
 - "asset://base[.mode]"
 - "source://base[.mode]"
</td></tr><tr><td>querystring</td><td>- A string containig the querypath  (Example: "/road/cars?color=red")
</td></tr><tr><td>method</td><td>- GET (default) ,POST or PUT
</td></tr><tr><td>data</td><td>- post data passed to call
</td></tr><tr><td>headers</td><td>- http headers passed to call
</td></tr><tr><td>overwriteProperties</td><td>-
 - retry: max nr of retries allowed
 - throttle: max amount of calls per second
 - timeout: timeout of a curl call in seconds
 - interval: try a new call if no response
 - user:
 - password:
 - proxy:
 - host:
 - rejectUnauthorized Whether to reject TLS unauthorized errors. (Defaults to true)
 
  // TODO: rewrite curl to be able to handle a GET string or properties
  //       e.g.: </td></tr></table></div></div><div class="command-header" onclick="toggleCommand('file')"><b>file</b><span class="quickDescription">
 TODO
</span></div><div style="display:none;" class="command-body" id="file">
 Execute a client stack program.
<table></table><code style="display:block;white-space: pre;"> rout('/asset/dummy/balance/__dummyaddress__')   // retrieve the balance for the dummy asset
 
  </code></div></div><div class="command-header" onclick="toggleCommand('form')"><b>form</b> [<i>factor=$factor</i>]<span class="quickDescription">
 Format a (floating point) number and return a neatly padded string.
</span></div><div style="display:none;" class="command-body" id="form">
 Execute a client stack program.
<table><tr><td>factor</td><td>- Contains a number
</td></tr></table><code style="display:block;white-space: pre;"> form()     // input: 10, output: "10.00000000" (using $factor = 8)
 form(8)    // input: 10, output: "10.00000000"
 form(4)    // input: 8, output: "0.8000"
  
  </code></div></div><div class="command-header" onclick="toggleCommand('hash')"><b>hash</b> [<i>method='sha256'</i>]<span class="quickDescription">
 Create a sha256 hash from an input string.
</span></div><div style="display:none;" class="command-body" id="hash">
 Execute a client stack program.
<table><tr><td>method</td><td>- Method to use for hashing, defaults to SHA256
</td></tr></table><code style="display:block;white-space: pre;">  hash("this_is_my_data")  // returns the hash: 5322fecfc92a5e3248a297a3df3eddfb9bd9049504272e4f572b87fa36d4b3bd
 
  // TODO: Implement method DJB2
  </code></div></div><div class="command-header" onclick="toggleCommand('math')"><b>math</b> <i>equation</i><span class="quickDescription">
 Calculates numbers and variables. Mathematical calculations can be done with very large numbers.
</span></div><div style="display:none;" class="command-body" id="math">
 Execute a client stack program.
<table><tr><td>equation</td><td>- String to calculate outcome of.
</td></tr></table><code style="display:block;white-space: pre;">  math('1034+8-(3^4)')  // returns 267
  math('^25')           // returns the value of data to the power of two times five
  math([2,3,4,5,6])      // returns the sum of all the numbers in the array
  math([2,3,4,5,6],'')  // multiplies all the numbers in the array
  math('+')              // adds all the numbers in the data array
 
  // TODO split into math and redu
  </code></div></div><div class="command-header" onclick="toggleCommand('prog')"><b>prog</b> <i>step</i> <i>steps</i><span class="quickDescription">
 Set progress of parent process.
</span></div><div style="display:none;" class="command-body" id="prog">
 Execute a client stack program.
<table><tr><td>step</td><td>- Current step in the progress. (Value -1 restores automatic progress reporting.)
</td></tr><tr><td>steps</td><td>- Total amount of steps.
</td></tr></table><code style="display:block;white-space: pre;"> prog(20,40)  // progress is set to 0.5 (which means 50%)
 prog()       // restore automatic progress reporting
 

  </code></div></div><div class="command-header" onclick="toggleCommand('rout')"><b>rout</b> <i>path</i><span class="quickDescription">
 Route a path through hybrixd and pass the result to the next step. /api/help for API information.
</span></div><div style="display:none;" class="command-body" id="rout">
 Execute a client stack program.
<table><tr><td>path</td><td>- Provide the routing path
</td></tr></table><code style="display:block;white-space: pre;"> rout('/asset/dummy/balance/__dummyaddress__')   // retrieve the balance for the dummy asset
 
  </code></div></div><div class="command-header" onclick="toggleCommand('scan')"><b>scan</b> <i>test</i> <i>cumulative</i> [<i>cinit=0</i>]<span class="quickDescription">
 Scan through the values of an array or object, and return values that pass the test.
</span></div><div style="display:none;" class="command-body" id="scan">
 Execute a client stack program.
<table><tr><td>test</td><td>      - Test to perform when scanning
</td></tr><tr><td>cumulative</td><td>- Cumulative operation
</td></tr><tr><td>cinit</td><td>     - Initial value of cumulative counter
</td></tr></table><code style="display:block;white-space: pre;"> scan('value>5')           // input: [1,2,3,4,5,6,7,8], output: [6,7,8]
 scan('val>5')             // val is shorthand for value - input: [1,2,3,4,5,6,7,8], output: [6,7,8]
 scan('cnt>5')             // input: [1,2,3,4,5,6,7,8], output: [4,5,6,7,8]
 scan('cnt>20','+(v2)')   // input: [2,4,6,8,10,12,14,16], output: [6,8,10,12,14,16]
 scan('cnt>5','',3)        // input: [1,2,3,4,5,6,7,8], output: [3,4,5,6,7,8]
 scan('cnt>1','+val.b')    // input: [{a:'a',b:1},{a:'b',b:1},{a:'c',b:1}], output: [{a:'b',b:1},{a:'c',b:1}]
 
  </code></div></div><div class="command-header" onclick="toggleCommand('tran')"><b>tran</b> <i>pattern</i> <i>input</i> [<i>onSuccess=1</i>] [<i>onError=1</i>]<span class="quickDescription">
 Transforms data using a pattern definition.
 also for arrays and dictionaries of property paths
 also for explicit primitive values
</span></div><div style="display:none;" class="command-body" id="tran">
 Execute a client stack program.
<table><tr><td>pattern</td><td>- A (or nested array/dicationary of) strings containing
 - explicit values (Example: "Hello")
 - property paths to test and pass (prefixed with ".") (Example: ".foo.bar"
 - expressions (prefixed with "=") (Example: "=a+b", "=.foo.bar|default")
</td></tr><tr><td>input</td><td>- The input
</td></tr><tr><td>onSuccess</td><td>- amount of instructions lines to jump on success.
</td></tr><tr><td>onError</td><td>- amount of instructions lines to jump on failure.
</td></tr></table><code style="display:block;white-space: pre;"> tran(".foo",1,2)                                         // Input: {foo:"bar"} : Passes "bar" to next
 tran(".foo.bar[2]",1,2)                                  // Input: {foo:{bar:[0,1,5]}} :  Passes 5 to next
 tran(".foo.bar[2]",1,2)                                  // Input: {foo:"bar"}   Jumps 2 instructions and passes {foo:"bar"}
 tran([".foo",".hello"],1,2)                              // Input: {foo:"bar",hello:"world"} Passes ["bar","world"] to next
 tran({a:".foo",b:".hello",c:"test"},1,2)                 // Input: {foo:"bar",hello:"world"} Passes {a:"bar", b:"world", c:"test"} to next
 tran("=.hello|default",1,2)                              // Input: {hello:"world"}  Passes "world" to next
 tran("=.hello|default",1,2)                              // Input: {foo:"bar"}  Passes "default" to next
 
  </code></div></div><div class="category">Depreciated</div><div class="command-header" onclick="toggleCommand('dump')"><b>dump</b> [<i>data</i>]<span class="quickDescription">
 Output debug information to the console.
</span></div><div style="display:none;" class="command-body" id="dump">
 Execute a client stack program.
<table><tr><td>data</td><td>- Data to display (using JSON.stringify). Also passed.
</td></tr></table><code style="display:block;white-space: pre;"> dump();      // outputs contents of data stream to console
 dump({a:1}); // outputs "[D] {a:1}" to console
 
  </code></div></div><div class="command-header" onclick="toggleCommand('prwt')"><b>prwt</b> <i>processID</i> [<i>interval=500</i>]<span class="quickDescription">
 Wait for a process to finish, and store its processID.
</span></div><div style="display:none;" class="command-body" id="prwt">
 Execute a client stack program.
<table><tr><td>processID</td><td>- Process ID to wait for.
</td></tr><tr><td>interval</td><td>- Amount of time in milliseconds between checks.
</td></tr></table><code style="display:block;white-space: pre;"> prwt("101123")        // wait for process with ID 101123 to finish, then continue
 prwt("209123")        // wait for process with ID 209123 to finish, then continue
 
  </code></div></div>