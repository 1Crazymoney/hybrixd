{
  "engine":"electrum-tcp",
  "name":"Electrum TCP connector",
  "module":"quartz",
  "cache":1000,
  "throttle":10,
  "quartz":{
    "status" : [
      "curl('asset://$symbol','','',{'jsonrpc':'2.0','id':0,'method':'server.version','params':[]},{'content-type':'text/plain'})",
      "test(data,1,2)",
      "stop(0,{module:'$symbol',synced:null,blocks:null,fee:null,supply:null,difficulty:null,testmode:null,version:data.result})",
      "stop(1,'No result!')"
    ],
    "unspent" : [
      "curl('asset://$symbol','','',{'jsonrpc':'2.0','id':0,'method':'blockchain.address.listunspent','params':['$1']})",
      "pass(data)"
    ],
    "unspent_BAK" : [
      "rout('/source/blockexplorer/$symbol/unspent/$1/$2/$3')"
    ],
    "balance" : [
      "curl('asset://$symbol','','',{'jsonrpc':'2.0','id':0,'method':'blockchain.address.get_balance','params':['$1']})",
      "tran({confirmed:'.result.confirmed',unconfirmed:'.result.unconfirmed'},2,1)",
      "fail('No result!')",
      "time($cache,data)",
      "math('data.confirmed+data.unconfirmed')",
      "atom()",
      "pass()"
    ],
    "push" : [
      "curl('asset://$symbol','','',{'jsonrpc':'2.0','id':0,'method':'blockchain.transaction.broadcast','params':['$1']})",
      "test(data,2,1)",
      "stop(1,'Broadcast failed!')",
      "tran('.result',2,1)",
      "stop(1,'No result!')",
      "test(data[0]===true,2,1)",
      "stop(1,data[1])",
      "pass(data[1])"
    ],
    "factor" : [
      "pass('$factor')"
    ],
    "transaction" : [
      "curl('asset://$symbol','','',{'jsonrpc':'2.0','id': 1, 'method': 'blockchain.transaction.get', 'params': ['$1',true] })",
      "tran('.result',2,1)",
      "stop(1,'No result')",
      "pass(data)"
    ],
     "details" : [
      "each({fee:1,factor:1,contract:1},'subdetails')",
      "stop(0,{fee:data.fee,factor:data.factor,contract:data.contract,symbol:'$symbol',name:'$name',mode:'$mode','unified-symbols':'$unified-symbols','fee-symbol':'$fee-symbol'!=='undefined'?'$fee-symbol':'$symbol'.split('.')[0],'keygen-base':'$keygen-base'!=='undefined'?'$keygen-base':'$symbol'.split('.')[0], generated:'$generated'==='undefined'?'never':'$generated'})"
    ],
    "subdetails" : [
      "call(data.key)"
    ],
    "sample" : [
      "stop(0,{address:'1F1tAaz5x1HUXrCNLbtMDqcw6o5GNn4xqX',transaction:'2c0832c153cf33327dae0e95a3bc39f4b02ae887725a32c07b1be47a2faffc55'})"
    ],
    "history" : [
      "rout('/source/blockexplorer/$symbol/history/$1')"
    ],
    "contract" : [
      "pass('undefined')"
    ],
    "fee" : [
      "pass('$fee')"
    ],
    "fee_backup" : [
      "curl('asset://$symbol','','',{'jsonrpc':'2.0','id': 1, 'method': 'blockchain.estimatefee', 'params': ['6'] })",
      "tran('.result',1,4)",
      "test(data>0,1,3)",
      "pass()",
      "jump(2)",
      "pass('$fee')"
    ]
  }
}
